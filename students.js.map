{"version":3,"file":"students.js","sources":["../src/js/students/studentsApi.js","../src/js/students/refs.js","../src/js/students/markup.js","../src/js/students/basicLightbox.js","../src/js/students/students.js"],"sourcesContent":["export const getStudents = () => {\n  return fetch('https://65d763b227d9a3bc1d7aea8d.mockapi.io/students').then(\n    response => {\n      if (!response.ok) {\n        throw new Error(response.message);\n      }\n\n      return response.json();\n    }\n  );\n};\n\nexport const setStudent = student => {\n  return fetch('https://65d763b227d9a3bc1d7aea8d.mockapi.io/students', {\n    method: 'POST',\n    headers: { 'content-type': 'application/json' },\n    body: JSON.stringify(student),\n  }).then(response => {\n    if (!response.ok) {\n      throw new Error(response.message);\n    }\n\n    return response.json();\n  });\n};\n","export const refs = {\n  galleryList: document.querySelector('.gallery'),\n  backdrop: document.querySelector('.backdrop'),\n  errorInfo: document.querySelector('.empty-students'),\n  modalBtn: document.querySelector('.js-modal-btn'),\n};\n","import { format } from 'date-fns';\n\nexport const getItemMarkUp = ({\n  avatar,\n  firstName,\n  id,\n  age,\n  country,\n  city,\n  lastName,\n}) => {\n  const dateOfBirth = format(new Date(age), 'dd MMMM yy');\n\n  return `<li class=\"photo-card\">\n            <img\n              src=\"${avatar}\"\n              alt=\"${firstName}\"\n            />\n            <button data-id=${id} type=\"button\" class=\"delete-btn js-delete-btn\">&#9988;</button>\n    \n            <div class=\"wrapper\">\n              <div class=\"info\" >\n              <b class=\"student-info\">${firstName}</b>\n              <b class=\"student-info\">${lastName}</b>\n              <b class=\"student-info\">${dateOfBirth}</b>\n              </div>\n    \n              <div class=\"info\">\n              <b class=\"student-info\">${country}</b>\n              <b class=\"student-info\">${city}</b>\n              </div>\n            </div>\n          </li>`;\n};\n","import * as basicLightbox from 'basiclightbox';\nimport { refs } from './refs';\n\nexport const instance = basicLightbox.create(\n  `\n\t<div class=\"modal\">\n    <form class=\"student-form\">\n      <input name=\"firstName\" placeholder=\"firstName*\" type=\"text\" required />\n      <input name=\"lastName\" placeholder=\"lastName*\" type=\"text\" required />\n      <input name=\"age\" placeholder=\"Age*\" type=\"text\" required />\n      <input name=\"country\" placeholder=\"Country*\" type=\"text\" required />\n      <input name=\"city\" placeholder=\"City*\" type=\"text\" required />\n\n      <button class=\"add-student-btn\">Add Student</button>\n    </form>\n    </div>\n`,\n  {\n    onShow: () => {\n      document.body.style.overflow = 'hidden';\n      refs.galleryList.style.opacity = 0.4;\n    },\n    onClose: () => {\n      document.body.style.overflow = 'visible';\n      refs.galleryList.style.opacity = 1;\n    },\n  }\n);\n","// https://65d763b227d9a3bc1d7aea8d.mockapi.io/students\n\nimport { getStudents, setStudent } from './studentsApi';\nimport { refs } from './refs';\nimport { getItemMarkUp } from './markup';\nimport { instance } from './basicLightbox';\n\nrefs.backdrop.classList.remove('is-hidden');\ngetStudents()\n  .then(students => {\n    if (!students.length) {\n      refs.errorInfo.classList.remove('is-hidden');\n      return;\n    }\n\n    const markup = students.map(student => getItemMarkUp(student)).join('');\n    refs.galleryList.innerHTML = markup;\n  })\n  .catch(err => {\n    refs.errorInfo.classList.remove('is-hidden');\n    refs.errorInfo.classList.add('error');\n    refs.errorInfo.textContent = 'something went wrong';\n  })\n  .finally(() => refs.backdrop.classList.add('is-hidden'));\n\nrefs.modalBtn.addEventListener('click', () => {\n  instance.show();\n\n  instance\n    .element()\n    .querySelector('.student-form')\n    .addEventListener('submit', e => {\n      e.preventDefault();\n\n      const { firstName, lastName, age, country, city } = e.target.elements;\n\n      const student = {\n        firstName: firstName.value,\n        lastName: lastName.value,\n        age: age.value,\n        country: country.value,\n        city: city.value,\n      };\n\n      instance.close();\n      refs.backdrop.classList.remove('is-hidden');\n\n      setStudent(student)\n        .then(student => {\n          const markup = getItemMarkUp(student);\n          refs.galleryList.insertAdjacentHTML('beforeend', markup);\n\n          if (!refs.errorInfo.classList.contains('is-hidden')) {\n            refs.errorInfo.classList.add('is-hidden');\n          }\n        })\n        .catch(err => {\n          refs.errorInfo.classList.remove('is-hidden');\n          refs.errorInfo.classList.add('error');\n          refs.errorInfo.textContent = 'something went wrong';\n        })\n        .finally(() => refs.backdrop.classList.add('is-hidden'));\n    });\n});\n\nrefs.galleryList.addEventListener('click', e => {\n  const { target } = e;\n  if (!target.classList.contains('js-delete-btn')) {\n    return;\n  }\n\n  const item = target.closest('.photo-card');\n  item.remove();\n\n  console.log(target.dataset.id);\n});\n"],"names":["getStudents","response","setStudent","student","refs","getItemMarkUp","avatar","firstName","id","age","country","city","lastName","dateOfBirth","format","instance","basicLightbox.create","students","markup","err","e","target"],"mappings":"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"}