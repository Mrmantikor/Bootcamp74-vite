// –°—Ç–≤–æ—Ä–∏ —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª –ø–æ—à—É–∫—É –∫—Ä–∞—ó–Ω–∏ –∑–∞ —ó—ó –Ω–∞–∑–≤–æ—é.
// - –Ñ –º–∞—Å–∏–≤ –æ–±'—î–∫—Ç—ñ–≤, –¥–µ –∫–æ–∂–µ–Ω –æ–±'—î–∫—Ç —Ü–µ –∫—Ä–∞—ó–Ω–∞ –∑ —Å–≤–æ—ó–º –Ω–∞–±–æ—Ä–æ–º –∑–Ω–∞—á–µ–Ω—å.
// - –°—Ç–≤–æ—Ä–∏ —Ñ—É–Ω–∫—Ü—ñ—é `onInputChange`, —è–∫–∞ –±—É–¥–µ –≤–∏–∫–ª–∏–∫–∞—Ç–∏—Å—è –∫–æ–∂–Ω–æ–≥–æ —Ä–∞–∑—É –∫–æ–ª–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –≤–≤–æ–¥–∏—Ç—å —â–æ—Å—å –≤ —ñ–Ω–ø—É—Ç.
// - –ù–µ–æ–±—Ö—ñ–¥–Ω–æ –∑–∞—Å—Ç–æ—Å—É–≤–∞—Ç–∏ –ø—Ä–∏–π–æ–º `Debounce` –Ω–∞ –æ–±—Ä–æ–±–Ω–∏–∫—É –ø–æ–¥—ñ—ó, —â–æ–± –∑–∞–ø—É—Å–∫–∞—Ç–∏ —Ñ—É–Ω–∫—Ü—ñ—é `onInputChange` –Ω–µ –æ–¥—Ä–∞–∑—É,
// –∞ —á–µ—Ä–µ–∑ 300–º—Å –ø—ñ—Å–ª—è —Ç–æ–≥–æ, —è–∫ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –ø–µ—Ä–µ—Å—Ç–∞–≤ –≤–≤–æ–¥–∏—Ç–∏ —Ç–µ–∫—Å—Ç. –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π lodash.debounce.
// - –Ø–∫—â–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –ø–æ–≤–Ω—ñ—Å—Ç—é –æ—á–∏—â–∞—î –ø–æ–ª–µ –ø–æ—à—É–∫—É, —Ç–æ —Ä–æ–∑–º—ñ—Ç–∫–∞ —Å–ø–∏—Å–∫—É –∫—Ä–∞—ó–Ω –∞–±–æ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó –ø—Ä–æ –∫—Ä–∞—ó–Ω—É –∑–Ω–∏–∫–∞—î.

// - –Ø–∫—â–æ —É –º–∞—Å–∏–≤—ñ –∫—Ä–∞—ó–Ω –∑–Ω–∞–π—à–ª–æ—Å—è –±—ñ–ª—å—à–µ –æ–¥–Ω—ñ—î—ó –∫—Ä–∞—ó–Ω–∏, –ø—ñ–¥ —Ç–µ—Å—Ç–æ–≤–∏–º –ø–æ–ª–µ–º –≤—ñ–¥–æ–±—Ä–∞–∂–∞—î—Ç—å—Å—è —Å–ø–∏—Å–æ–∫ –∑–Ω–∞–π–¥–µ–Ω–∏—Ö –∫—Ä–∞—ó–Ω.
//  –ö–æ–∂–µ–Ω –µ–ª–µ–º–µ–Ω—Ç —Å–ø–∏—Å–∫—É —Å–∫–ª–∞–¥–∞—î—Ç—å—Å—è –∑ –ø—Ä–∞–ø–æ—Ä–∞ —Ç–∞ –Ω–∞–∑–≤–∏ –∫—Ä–∞—ó–Ω–∏.

// html
//  <li>
//     <div class="countryFlag"></div>
//     <p class="countryName">Ukraine üá∫üá¶</p>
// </li>;

// - –Ø–∫—â–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –∑–∞–ø–∏—Ç—É - —Ü–µ –º–∞—Å–∏–≤ –∑ –æ–¥–Ω—ñ—î—é –∫—Ä–∞—ó–Ω–æ—é, –≤ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ñ –≤—ñ–¥–æ–±—Ä–∞–∂–∞—î—Ç—å—Å—è —Ä–æ–∑–º—ñ—Ç–∫–∞ –∫–∞—Ä—Ç–∫–∏ –∑ –¥–∞–Ω–∏–º–∏ –ø—Ä–æ
// –∫—Ä–∞—ó–Ω—É: –ø—Ä–∞–ø–æ—Ä, –Ω–∞–∑–≤–∞, —Å—Ç–æ–ª–∏—Ü—è, –Ω–∞—Å–µ–ª–µ–Ω–Ω—è.
// html
{
  /* <li>
    <div class="previewCard">
        <div class="countryFlag">
        <p class="countryName">Ukraine üá∫üá¶</p>
    </div>
    <p class="countryCapital"><b>Capital </b> Kyiv</p>
    <p class="countryPopulation"><b>Population: </b>41 342 765</p>
    <p class="countryArea"><b>Area: </b>603.628</p>
</li> */
}

import debounce from 'lodash.debounce';
// - –Ø–∫—â–æ –∫—Ä–∞—ó–Ω–∏ –Ω–µ –±—É–ª–æ –∑–Ω–∞–π–¥–µ–Ω–æ —É –º–∞—Å–∏–≤—ñ, —Ç–æ —Ä–æ–∑–º—ñ—Ç–∫–∞ —Å–ø–∏—Å–∫—É –∫—Ä–∞—ó–Ω –∞–±–æ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—ó –ø—Ä–æ –∫—Ä–∞—ó–Ω—É –∑–Ω–∏–∫–∞—î —ñ –ø–æ–∫–∞–∑—É—î—Ç—å—Å—è
// –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è –≤ `errorTextRef` –ø—Ä–æ —Ç–µ —â–æ `""Oops, there is no country with that name"${}"`

import { countries } from './countries-list';
import { countriesMarkup, oneCountryMarkup } from './createMarkup';
const refs = {
  input: document.querySelector('.js-search-input'),
  countriesList: document.querySelector('.js-country-list'),
};

const onInputChange = function (event) {
  if (!event.target.value) {
    refs.countriesList.innerHTML = '';
    return;
  }
  const findCountries = countries.filter(el =>
    el.name.toLowerCase().includes(event.target.value.toLowerCase())
  );
  if (findCountries.length === 1) {
    const markup = oneCountryMarkup(findCountries);
    refs.countriesList.innerHTML = markup;
  } else if (findCountries.length > 1) {
    const markup = countriesMarkup(findCountries);
    refs.countriesList.innerHTML = markup;
  }
};
refs.input.addEventListener('input', debounce(onInputChange, 300));
